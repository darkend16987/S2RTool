<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planning Detail Render - S2R Tool</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- HEADER -->
    <header class="app-header">
        <div class="header-content">
            <h1>üåÜ Planning Detail Render - S2R Tool</h1>
            <p class="header-subtitle">Sketch to Photorealistic Planning Visualization ‚Ä¢ Powered by Gemini AI</p>
        </div>
    </header>

    <!-- BACK TO HOME -->
    <div style="max-width: 1600px; margin: 0 auto; padding: 1rem 1.5rem;">
        <a href="index.html" style="display: inline-flex; align-items: center; gap: 0.5rem; color: #2563eb; text-decoration: none; font-weight: 600;">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            V·ªÅ trang ch·ªß
        </a>
    </div>

    <!-- PLANNING DETAIL MODE CONTAINER -->
    <div class="main-container">

        <!-- =============================================== -->
        <!-- COLUMN 1: INPUT SKETCH -->
        <!-- =============================================== -->
        <aside class="panel panel-input">
            <div class="panel-header">
                <span class="step-badge">B∆∞·ªõc 1</span>
                <h2>Upload Planning Sketch</h2>
            </div>

            <!-- Image Uploader -->
            <div id="imageUploader" class="image-uploader">
                <input type="file" id="uploadSketch" accept="image/*" style="display: none;">
                <label for="uploadSketch" id="uploadLabel" class="upload-label">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    <span class="upload-text">K√©o th·∫£ ho·∫∑c nh·∫•n ƒë·ªÉ t·∫£i ·∫£nh</span>
                    <span class="upload-hint">JPG, PNG ‚Ä¢ Max 16MB</span>
                </label>
                <img id="previewImage" src="" alt="Sketch preview" class="preview-image hidden">
            </div>

            <!-- Info Box -->
            <div class="info-box">
                <strong>üí° Planning Detail Mode:</strong>
                <ul>
                    <li>Sketch quy ho·∫°ch c√≥ S·∫¥N c√¥ng tr√¨nh</li>
                    <li>Nhi·ªÅu t√≤a nh√†/c√¥ng tr√¨nh trong 1 khu</li>
                    <li>Focus: H√¨nh th√°i, t·ª∑ l·ªá, layout</li>
                    <li>G√≥c nh√¨n: Birdview/Drone preferred</li>
                </ul>
            </div>
        </aside>

        <!-- =============================================== -->
        <!-- COLUMN 2: PARAMETERS FORM -->
        <!-- =============================================== -->
        <main class="panel panel-form">
            <div class="panel-header">
                <span class="step-badge">B∆∞·ªõc 2</span>
                <h2>Th√¥ng s·ªë Render</h2>
            </div>

            <form id="planningDetailForm">

                <!-- Planning Description -->
                <div class="form-group">
                    <label for="planning_description">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
                        M√¥ t·∫£ t·ªïng th·ªÉ quy ho·∫°ch
                    </label>
                    <textarea id="planning_description" rows="3" placeholder="VD: Khu ƒë√¥ th·ªã h·ªón h·ª£p g·ªìm 3 t√≤a cao t·∫ßng (25-30 t·∫ßng) v√† 5 d√£y th·∫•p t·∫ßng (4-5 t·∫ßng), c√≥ kh√¥ng gian xanh trung t√¢m v√† qu·∫£ng tr∆∞·ªùng..." required></textarea>
                </div>

                <!-- Camera Angle -->
                <div class="form-group">
                    <label for="camera_angle">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                        G√≥c nh√¨n (Camera Angle)
                    </label>
                    <select id="camera_angle">
                        <option value="drone_45deg" selected>Drone 45¬∞ (Khuy√™n d√πng) - Nh√¨n ch√©o t·ª´ tr√™n</option>
                        <option value="birds_eye">Bird's Eye (90¬∞) - Nh√¨n th·∫≥ng t·ª´ tr√™n</option>
                        <option value="drone_30deg">Drone th·∫•p 30¬∞ - G·∫ßn m·∫∑t ƒë·∫•t h∆°n</option>
                        <option value="eye_level">T·∫ßm m·∫Øt ng∆∞·ªùi - Street level</option>
                    </select>
                </div>

                <!-- Aspect Ratio -->
                <div class="form-group">
                    <label for="aspect_ratio">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>
                        T·ª∑ l·ªá khung h√¨nh
                    </label>
                    <select id="aspect_ratio">
                        <option value="16:9" selected>Landscape (2048√ó1152) - Khuy√™n d√πng</option>
                        <option value="4:3">Standard (2048√ó1536)</option>
                        <option value="1:1">Square (2048√ó2048) - Master Plan</option>
                    </select>
                </div>

                <!-- Environment Settings -->
                <details class="form-section" open>
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        M√¥i tr∆∞·ªùng & √Ånh s√°ng
                    </summary>
                    <div class="section-content">
                        <!-- Time of Day -->
                        <div class="form-group">
                            <label for="time_of_day">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12 6 12 12 16 14"/>
                                </svg>
                                Th·ªùi ƒëi·ªÉm (Time of Day)
                            </label>
                            <select id="time_of_day">
                                <option value="golden_hour" selected>Gi·ªù v√†ng (Golden hour) - Khuy√™n d√πng</option>
                                <option value="morning">Bu·ªïi s√°ng s·ªõm</option>
                                <option value="midday">Bu·ªïi tr∆∞a - N·∫Øng g·∫Øt</option>
                                <option value="afternoon">Chi·ªÅu t√†</option>
                                <option value="evening">Bu·ªïi t·ªëi - ƒê√®n b·∫≠t</option>
                                <option value="night">Ban ƒë√™m</option>
                            </select>
                        </div>

                        <!-- Weather -->
                        <div class="form-group">
                            <label for="weather">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>
                                </svg>
                                Th·ªùi ti·∫øt (Weather)
                            </label>
                            <select id="weather">
                                <option value="clear" selected>Tr·ªùi quang, n·∫Øng ƒë·∫πp</option>
                                <option value="cloudy">Nhi·ªÅu m√¢y</option>
                                <option value="light_rain">M∆∞a nh·∫π</option>
                                <option value="foggy">S∆∞∆°ng m√π nh·∫π</option>
                            </select>
                        </div>
                    </div>
                </details>

                <!-- Render Quality Presets -->
                <details class="form-section" open>
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        Ch·∫•t l∆∞·ª£ng Render (Quality Presets)
                    </summary>
                    <div class="section-content">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_gi" checked style="width: 18px; height: 18px;">
                                <span>Global Illumination</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_shadows" checked style="width: 18px; height: 18px;">
                                <span>Soft Shadows</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_hdri" checked style="width: 18px; height: 18px;">
                                <span>HDRI Sky</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_reflection" checked style="width: 18px; height: 18px;">
                                <span>Reflections (Glass/Water)</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_dof" checked style="width: 18px; height: 18px;">
                                <span>Depth of Field</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_bloom" checked style="width: 18px; height: 18px;">
                                <span>Bloom / Lens Flare</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_color_correction" checked style="width: 18px; height: 18px;">
                                <span>Color Correction</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_desaturate" checked style="width: 18px; height: 18px;">
                                <span>-5% Saturation (Realism)</span>
                            </label>
                        </div>
                    </div>
                </details>

                <!-- Fidelity Slider -->
                <div class="form-group">
                    <label for="sketch_adherence">
                        ƒê·ªô b√°m s√°t Sketch:
                        <span id="sketch_adherence_value" class="range-value">0.90</span>
                    </label>
                    <input type="range" id="sketch_adherence" min="0.5" max="1.0" step="0.01" value="0.90" class="range-slider">
                    <div class="range-labels">
                        <span>Linh ho·∫°t</span>
                        <span>Ch√≠nh x√°c tuy·ªát ƒë·ªëi</span>
                    </div>
                    <small style="color: #64748b; font-size: 0.875rem; display: block; margin-top: 0.25rem;">
                        Planning mode: Khuy√™n d√πng 0.85-0.90 ƒë·ªÉ c√¢n b·∫±ng gi·ªØa h√¨nh th√°i v√† ch·∫•t l∆∞·ª£ng ·∫£nh
                    </small>
                </div>

            </form>
        </main>

        <!-- =============================================== -->
        <!-- COLUMN 3: OUTPUT & ACTIONS -->
        <!-- =============================================== -->
        <aside class="panel panel-output">
            <div class="panel-header">
                <span class="step-badge">B∆∞·ªõc 3</span>
                <h2>K·∫øt qu·∫£ Render</h2>
            </div>

            <!-- Action Buttons -->
            <div class="output-actions">
                <button id="generateRenderButton" class="btn-submit">
                    <span id="renderSpinner" class="spinner hidden"></span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                    T·∫°o Render
                </button>
            </div>

            <!-- Messages -->
            <div id="renderError" class="message error-message hidden"></div>
            <div id="renderSuccess" class="message success-message hidden"></div>

            <!-- Gallery -->
            <div id="gallery" class="gallery">
                <div class="gallery-placeholder">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <circle cx="8.5" cy="8.5" r="1.5"/>
                        <polyline points="21 15 16 10 5 21"/>
                    </svg>
                    <p>K·∫øt qu·∫£ render s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y</p>
                </div>
            </div>

            <!-- Output Controls -->
            <div id="outputControls" class="output-controls hidden">
                <button id="downloadImageBtn" class="btn-secondary btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    T·∫£i v·ªÅ
                </button>
                <button id="regenerateBtn" class="btn-secondary btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="1 4 1 10 7 10"/>
                        <polyline points="23 20 23 14 17 14"/>
                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
                    </svg>
                    T·∫°o l·∫°i
                </button>
            </div>

            <!-- Stats Box -->
            <div id="statsBox" class="stats-box hidden">
                <div class="stat-item">
                    <span class="stat-label">Th·ªùi gian:</span>
                    <span class="stat-value" id="statTime">-</span>
                </div>
            </div>
        </aside>

    </div>
    <!-- END MAIN CONTAINER -->

    <!-- FOOTER -->
    <footer class="app-footer">
        <p>Made by <strong>Nam Ta</strong> + <strong>Gemini AI</strong></p>
        <p>¬©2025 ‚Ä¢ Architecture S2R Tool ‚Ä¢ All rights reserved</p>
    </footer>

    <!-- JavaScript -->
    <script src="planning-detail-script.js"></script>
</body>
</html>
